function adapt(){var b=document.body.clientHeight;var c=(b-240)/2;var a=(c>0?c:0);$("#loginpanel").css("top",a)}Ext.onReady(function(){if(isWechatBrowser()){window.location.replace("weixin!wxLogin.action");return}var d=window.ActiveXObject?true:false;var e='<font color = "red" size = "2">'+getIi18NText("supportTips_par1")+"<br />"+getIi18NText("supportTips_par2")+"</font>";if(window.top!==window.self){Ext.Msg.show({title:getIi18NText("systemMessage"),msg:getIi18NText("longTimesWarming"),icon:Ext.MessageBox.WARNING,buttons:Ext.MessageBox.OK,closable:false,buttonText:{ok:getIi18NText("loginAgain")},fn:function(){window.top.location=window.location}});return}Ext.tip.QuickTipManager.init();var g=(local=="kr");var h=getloginCss(local);window.setTimeout(function(){b()},500);var a=function(m,l,j,k){if(l==j){return}Ext.getBody().mask("正在为您切换语言...");Ext.Ajax.request({url:"auth!changeLang.action",method:"post",params:{lang:l,rand:new Date().getTime()},callback:function(){Ext.getBody().unmask();window.location.replace(window.location.href)}})};var c=function(n,m,j,k){if(m==j){return}var l=30;var o=new Date();o.setTime(o.getTime()+l*24*60*60*1000);document.cookie="currentMode="+escape("new1")+";expires="+o.toGMTString();window.location.replace(window.location.href)};function b(){var l=Ext.getBody().getHeight();var p=Ext.getBody().getWidth();Ext.getBody().setStyle({background:"url(images/wallpaper/back03.jpg) no-repeat",backgroundSize:"100% 100%"});var j=0;var m=0;var r=[(j>0?j:0),(m>0?m:0)];Ext.create("Ext.panel.Panel",{width:586,height:400,style:"margin:0 auto;",id:"loginpanel",shadow:false,border:false,layout:"absolute",items:[{xtype:"panel",width:586,height:240,x:r[0],y:r[1],baseCls:"panelBodyCls"},{xtype:"image",imgCls:h,width:217,height:96,x:r[0],y:r[1],style:"margin: 10px 0 0 5px"},{xtype:"combo",width:90,editable:false,hidden:true,x:r[0]+380,y:r[1]+20,store:[["old",getIi18NText("classicTheme")],["new1",getIi18NText("dazzleTheme")]],queryMode:"local",displayField:"name",valueField:"value",value:"old",listeners:{change:c}},{xtype:"combo",width:90,editable:false,x:r[0]+480,y:r[1]+20,store:[["EN","English"],["CN","简体中文"]],queryMode:"local",displayField:"name",valueField:"value",hidden:g,value:currentLangType,listeners:{change:a}},{xtype:"panel",width:450,height:40,x:(r[0]+85),y:(r[1]+85),hidden:!d,baseCls:"",html:e},{xtype:"panel",baseCls:"alphaBack",width:580,height:100,x:r[0],y:r[1],margin:"100px 0 0 0",layout:{type:"hbox",defaultMargins:{top:5,right:5,bottom:5},pack:"center",align:"middle"},items:[{xtype:"component",width:60,height:60},{xtype:"textfield",id:"userName",emptyText:getIi18NText("enterUsnTips"),width:180,height:35,allowBlank:false,blankText:getIi18NText("notNull"),allowOnlyWhitespace:false,fieldCls:"fieldInputCls",maxLength:100,enforceMaxLength:true,initEvents:function(){var s=function(u){var t=" ";var v=u.getCharCode();if(t.indexOf(String.fromCharCode(v))!=-1){u.stopEvent()}};this.el.on("keypress",s,this)}},{xtype:"textfield",id:"userPwd",emptyText:getIi18NText("enterPswTips"),inputType:"password",allowBlank:false,blankText:getIi18NText("notNull"),allowOnlyWhitespace:false,fieldCls:"fieldInputCls",width:180,height:35,maxLength:100,enforceMaxLength:true,listeners:{render:function(s){s.getEl().on("keydown",function(v,u){if(v.getKey()==Ext.EventObject.ENTER){k(s.nextSibling("button"))}})}},initEvents:function(){var s=function(u){var t=" ";var v=u.getCharCode();if(t.indexOf(String.fromCharCode(v))!=-1){u.stopEvent()}};this.el.on("keypress",s,this)}},{xtype:"button",text:'<font class="butFontIconCss">'+getIi18NText("login")+"</font>",border:false,iconCls:"loginIconCss",width:100,height:35,handler:k}]},{xtype:"image",imgCls:"loginImgIconCss",width:68,height:68,x:r[0],y:r[1],style:"margin: 105px 0 0 10px"},{xtype:"displayfield",id:"displayTipField",fieldCls:"tipFontCls",hidden:true,value:"",x:r[0],y:r[1],style:"margin: 175px 0 0 85px"},{xtype:"button",text:'<span style="text-decoration: underline">'+getIi18NText("message_down_apk")+"</span>",title:getIi18NText("message_down_apk"),x:r[0],y:r[1],id:"aDownload",style:"margin: 200px 0 0 460px;background:transparent",border:false,handler:function(){o()}},{xtype:"image",imgCls:"vendingIconCss",overCls:"vending_overIconCss",width:90,height:95,title:"点击访问 ADS自助售卖平台",x:r[0],y:r[1],style:"margin: 305px 0 0 195px",listeners:{click:{element:"el",fn:i}}},{xtype:"image",imgCls:"dcIconCss",overCls:"dcIcon_overCss",width:90,height:95,title:"点击访问 ADS自助点餐平台",x:r[0],y:r[1],style:"margin: 305px 0 0 312px",listeners:{click:{element:"el",fn:f}}}],renderTo:document.body});function q(){var t=document.body.clientHeight;var u=(t-240)/2;var s=(u>0?u:0);$("#loginpanel").css("top",s)}q();function k(t){var s=Ext.getCmp("userName");var v=Ext.getCmp("userPwd");var u=Ext.getCmp("displayTipField");u.show();u.setValue("");u.getEl().slideIn("t",{duration:400,easing:"backIn"});if(!s.isValid()){s.getEl().frame();u.setValue(getIi18NText("enterUsnTips"));return}if(!v.isValid()){v.getEl().frame();u.setValue(getIi18NText("enterPswTips"));return}u.setValue(getIi18NText("checkLoginInfo"));s.setDisabled(true);v.setDisabled(true);t.setDisabled(true);window.setTimeout(function(){Ext.Ajax.request({url:"auth!loginUser.action",method:"post",params:{n:s.getValue().trim(),p:v.getValue(),mod:"old"},success:function(y,w){if(y&&!Ext.isEmpty(y.responseText)){var x=Ext.JSON.decode(y.responseText);if(x.code==0){u.setValue(getIi18NText("loginSuccessTips"));window.location.replace("auth!indexPage.action");return}else{if(x.code==1){u.setValue(getIi18NText("loginError02"))}else{if(x.code==2){u.setValue(getIi18NText("loginError01"))}else{if(x.code==3){u.setValue(getIi18NText("loginError03"))}else{if(x.code==4){u.setValue(getIi18NText("loginError06"))}else{if(x.code==5){u.setValue(getIi18NText("loginError07"))}else{u.setValue(getIi18NText("loginError04"))}}}}}}}s.setDisabled(false);v.setDisabled(false);t.setDisabled(false)},failure:function(x,w){u.setValue(getIi18NText("loginError05"));s.setDisabled(false);v.setDisabled(false);t.setDisabled(false)}})},800)}var n;function o(){if(n){n.show("aDownload");return}n=Ext.create("Ext.panel.Panel",{width:300,title:getIi18NText("message_down_apk"),height:220,header:true,modal:true,floating:true,draggable:true,closable:true,border:true,shadowOffset:15,layout:{type:"vbox",align:"center"},items:[{xtype:"button",text:"General version",scale:"large",width:180,margin:10,hidden:g,handler:function(){window.location="images/app/player.apk"}}],closeAction:"hide"});n.show("aDownload")}}function i(){window.open("http://vending.azld.net/","_blank")}function f(){window.open("http://azlddc.cn/","_blank")}});