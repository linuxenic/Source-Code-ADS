var dateFormat="Y/m/d H:i:s";var fileLen;var files;var uploadType;var language=window.top.langtype=="EN"?"en_GB":"zh_CN";var editorConfig={relative_urls:false,theme:"modern",language:language,menubar:false,image_advtab:true,fontsize_formats:"8pt 10pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 26pt 28pt 30pt 32pt 34pt 36pt 38pt 40pt 42pt 44pt 46pt 48pt 50pt 52pt 54pt 56pt 58pt 60pt 62pt 64pt 66pt 68pt 70pt 72pt 74pt 76pt 84pt 100pt 130pt 150pt 180pt 200pt 230pt 250pt 280pt 300pt 400pt 500pt 600pt",plugins:["advlist autolink lists hr anchor","contextmenu directionality","textcolor colorpicker"],toolbar1:"undo redo | forecolor backcolor | bold italic | fontsizeselect | alignleft | aligncenter | alignright",image_advtab:true};function customize_text_sizes(b){var a=b+"px";editorConfig.fontsize_formats=editorConfig.fontsize_formats+a}(function(){if(Ext&&Ext.apply){Ext.apply(Ext.form.VTypes,{confirmPwd:function(d,c){if(c.confirm){var a=Ext.getCmp(c.confirm);var b=a.getValue()==d;if(b){a.clearInvalid()}return b}},confirmPwdText:"两次输入的密码不一致!"})}})();function preivewHtmlFrame(b){if(!Ext||!b){return}var a=window.top.frmaeWindowFn;if(a&&typeof(a)=="function"){a(b)}}function getAjaxProxy(a){return new Ext.data.proxy.Ajax(Ext.merge({type:"ajax",url:"",reader:{type:"json",root:"data",totalProperty:"totalCount"},timeout:20000,simpleSortMode:false,extraParams:{},filterParam:"query",listeners:{exception:function(e,c,b,d){showResult(false,c)}}},a))}function showResult(d,b){var a;if(b.timedout==true){Ext.Msg.alert(getIi18NText("systemMessage"),getIi18NText("timeout")+"<br/><font color='red'>("+getIi18NText("dealTimeoutTip01")+")</font>");return false}var a;try{a=Ext.decode(b.responseText)}catch(c){Ext.Msg.alert(getIi18NText("systemMessage"),getIi18NText("loginTimeoutTip01"),function(){window.location.replace("auth!logOffUser.action")});return false}if(!a||d==false){Ext.Msg.alert(getIi18NText("systemMessage"),getIi18NText("dataError")+"<br/><font color='red'>("+getIi18NText("dataErrorTip")+")</font>");return false}if(a.code!=0){Ext.Msg.alert(getIi18NText("systemMessage"),a.msg);return false}return a}var fileManager={fileData:[],timeId:0,fileChange:function(c){fileManager.fileData=[];var g=["swf","mp3","bmp","gif","jpg","png","mp4","flv","avi","apk"];var e=c;var b=c.type.toLowerCase();if(e.name.length>50){Ext.Msg.alert("系统提示","文件名称的长度请限制在50个字符以内。<br/>");return}var h=Ext.Array.indexOf(g,b);var a=2;if(h==0){b="动画";a=5}else{if(h==1){b="音频";a=4}else{if(h<=5){b="图片";a=2}else{if(h>5&&h<8){b="视频";a=3}else{if(h==8){b="app";a=7}else{b="图片"}}}}}var d={id:Ext.id(),name:e.name,type:b,tval:a,status:"1"};fileManager.fileData.push(d)},updateProcess:function(a,c,b){function d(e){window.clearTimeout(fileManager.timeId);fileManager.timeId=window.setTimeout(function(){Ext.Ajax.request({url:"source!takeUploadProcess.action",params:{id:b,rand:Ext.id(),serial:b},method:"post",callback:function(h,i,g){var f=showResult(i,g);if(f==false){return}if(f.status==1){d(500);return}if(f.status==2){d(500)}else{a.set("filePercent",100);a.set("status",c.getStatus());window.setTimeout(function(){if(typeof(searchFn)=="function"){}},1000)}}})},e)}d(1)}};function executeMaximize(b){if(!Ext||!b){return}var a=window.top.executeMaximizeFn;if(a&&typeof(a)=="function"){a(b)}}function uploadFileFn(b){if(!Ext||!b){return}var a=window.top.uploadFileWindow;if(a&&typeof(a)=="function"){a(b)}}function createPanelWin(b){var d=window.digitalUpload;var a=500;var c=230;if(d&&d.isPanel){d.show(b);window.digitalUpload=d;return}}function setCompLine(o){var i=Ext.getCmp(o);var k=i.z;var g=Ext.getCmp(drawCenterId+nowWebId).getEl().getX();var d=Ext.getCmp(drawCenterId+nowWebId).getEl().getY();var h=allCompXY.get(o).split("*");var j=allCompSize.get(o).split("*");var b=Number(h[0])*nowRate;var f=Number(h[1])*nowRate;var a=Number(j[0])*nowRate;var n=Number(j[1])*nowRate;var l=Ext.create("Ext.panel.Panel",{id:compLinePrefix+o+"_Left",width:1,bodyStyle:{background:"none"},height:n,border:false,style:{borderStyle:"none none none dashed",borderWidth:"1px",zIndex:k},x:b,y:f,z:zIndexNum,hidden:false});Ext.getCmp(drawCenterId+nowWebId).add(l);var m=Ext.create("Ext.panel.Panel",{id:compLinePrefix+o+"_Right",width:1,bodyStyle:{background:"none"},height:n,border:false,style:{borderStyle:"none dashed none none",borderWidth:"1px",zIndex:k},x:a+b-1,y:f,z:zIndexNum,hidden:false});Ext.getCmp(drawCenterId+nowWebId).add(m);var c=Ext.create("Ext.panel.Panel",{id:compLinePrefix+o+"_Top",width:a,bodyStyle:{background:"none"},height:1,border:false,style:{borderStyle:"dashed none none none",borderWidth:"1px",zIndex:k},x:b,y:f,z:zIndexNum,hidden:false});Ext.getCmp(drawCenterId+nowWebId).add(c);var e=Ext.create("Ext.panel.Panel",{id:compLinePrefix+o+"_Bottom",width:a,bodyStyle:{background:"none"},height:1,border:false,style:{borderStyle:"none none dashed none",borderWidth:"1px",zIndex:k},x:b,y:f+n-1,z:zIndexNum,hidden:false});Ext.getCmp(drawCenterId+nowWebId).add(e)}function resetLinesZindex(b,a){Ext.getCmp(guidesPrefix+b+"_left").getEl().setStyle({zIndex:a});Ext.getCmp(guidesPrefix+b+"_right").getEl().setStyle({zIndex:a});Ext.getCmp(guidesPrefix+b+"_top").getEl().setStyle({zIndex:a});Ext.getCmp(guidesPrefix+b+"_bottom").getEl().setStyle({zIndex:a});Ext.getCmp(compLinePrefix+b+"_Left").getEl().setStyle({zIndex:a});Ext.getCmp(compLinePrefix+b+"_Right").getEl().setStyle({zIndex:a});Ext.getCmp(compLinePrefix+b+"_Top").getEl().setStyle({zIndex:a});Ext.getCmp(compLinePrefix+b+"_Bottom").getEl().setStyle({zIndex:a})}function synChangeCompLine(b,a,c,f,e,d){return;Ext.getCmp(compLinePrefix+nowCompId+"_Left").getEl().setX(b+e);Ext.getCmp(compLinePrefix+nowCompId+"_Left").getEl().setY(a+d);Ext.getCmp(compLinePrefix+nowCompId+"_Left").getEl().setSize(1,f);Ext.getCmp(compLinePrefix+nowCompId+"_Right").getEl().setX(b+c+e);Ext.getCmp(compLinePrefix+nowCompId+"_Right").getEl().setY(a+d);Ext.getCmp(compLinePrefix+nowCompId+"_Right").getEl().setSize(1,f);Ext.getCmp(compLinePrefix+nowCompId+"_Top").getEl().setX(b+e);Ext.getCmp(compLinePrefix+nowCompId+"_Top").getEl().setY(a+d);Ext.getCmp(compLinePrefix+nowCompId+"_Top").getEl().setSize(c,1);Ext.getCmp(compLinePrefix+nowCompId+"_Bottom").getEl().setX(b+e);Ext.getCmp(compLinePrefix+nowCompId+"_Bottom").getEl().setY(a+f+d);Ext.getCmp(compLinePrefix+nowCompId+"_Bottom").getEl().setSize(c,1)}function synChangeCompLineOnMove(c,a,d,g,f,e,b){Ext.getCmp(compLinePrefix+b+"_Left").getEl().setX(c+f);Ext.getCmp(compLinePrefix+b+"_Left").getEl().setY(a+e);Ext.getCmp(compLinePrefix+b+"_Left").getEl().setSize(1,g);Ext.getCmp(compLinePrefix+b+"_Right").getEl().setX(c+d+f);Ext.getCmp(compLinePrefix+b+"_Right").getEl().setY(a+e);Ext.getCmp(compLinePrefix+b+"_Right").getEl().setSize(1,g);Ext.getCmp(compLinePrefix+b+"_Top").getEl().setX(c+f);Ext.getCmp(compLinePrefix+b+"_Top").getEl().setY(a+e);Ext.getCmp(compLinePrefix+b+"_Top").getEl().setSize(d,1);Ext.getCmp(compLinePrefix+b+"_Bottom").getEl().setX(c+f);Ext.getCmp(compLinePrefix+b+"_Bottom").getEl().setY(a+g+e);Ext.getCmp(compLinePrefix+b+"_Bottom").getEl().setSize(d,1)}function removeCompLine(d){var e=Ext.getCmp(compLinePrefix+d+"_Left");var a=Ext.getCmp(compLinePrefix+d+"_Right");var b=Ext.getCmp(compLinePrefix+d+"_Top");var c=Ext.getCmp(compLinePrefix+d+"_Bottom");Ext.getCmp(drawCenterId+nowWebId).remove(e,true);Ext.getCmp(drawCenterId+nowWebId).remove(a,true);Ext.getCmp(drawCenterId+nowWebId).remove(b,true);Ext.getCmp(drawCenterId+nowWebId).remove(c,true)}function resetGuideOnScreenChange(g,e,j,b,f,d,i,a,k){var c=Ext.getCmp(k);if(c.id.indexOf("_left")>-1){c.getEl().setY(Math.abs(e));c.getEl().setX(Math.abs(g));c.setHeight(a)}else{if(c.id.indexOf("_right")>-1){c.getEl().setY(Math.abs(d));c.getEl().setX(Math.abs(g+j));c.setHeight(a)}else{if(c.id.indexOf("_top")>-1){c.getEl().setX(Math.abs(f));c.getEl().setY(Math.abs(e));c.setWidth(i)}else{if(c.id.indexOf("_bottom")>-1){c.getEl().setX(Math.abs(f));c.getEl().setY(Math.abs(e+b));c.setWidth(i)}}}}}function resetCmpLineOnScreenChange(g,e,j,b,f,d,i,a,k){var c=Ext.getCmp(k);if(c.id.indexOf("_Left")>-1){c.getEl().setY(Math.abs(e));c.getEl().setX(Math.abs(g));c.setHeight(b)}else{if(c.id.indexOf("_Right")>-1){c.getEl().setY(Math.abs(e));c.getEl().setX(Math.abs(g));c.setHeight(b)}else{if(c.id.indexOf("_Top")>-1){c.getEl().setX(Math.abs(g));c.getEl().setY(Math.abs(e));c.setWidth(j)}else{if(c.id.indexOf("_Bottom")>-1){c.getEl().setX(Math.abs(g));c.getEl().setY(Math.abs(e+b));c.setWidth(j)}}}}}function getOs(){var a="";if(navigator.userAgent.indexOf("MSIE")>0){return"IE"}if(isFirefox=navigator.userAgent.indexOf("Firefox")>0){return"Firefox"}if(isSafari=navigator.userAgent.indexOf("Safari")>0){return"Safari"}if(isCamino=navigator.userAgent.indexOf("Camino")>0){return"Camino"}if(isMozilla=navigator.userAgent.indexOf("Gecko/")>0){return"Gecko"}}function isIEOS(){if(navigator.userAgent.indexOf("MSIE")>0){return true}return false}function isChromeOS(){if(isChrome=navigator.userAgent.indexOf("Chrome")>0){return true}return false}function isFirefoxOS(){if(isFirefox=navigator.userAgent.indexOf("Firefox")>0){return true}return false}function getIi18NText(a,b){return window.top.getIi18NText(a,b)}function getMsgIi18NText(a){return window.top.getMsgIi18NText(a)}function getDynIi18NText(a,b){return window.top.getDynIi18NText(a,b)}function getItemIi18NText(a,b){return window.top.getItemIi18NText(a,b)}function getIi18NRoleManagerTitle(a){return window.top.getIi18NRoleManagerTitle(a)}function createPreviewWindow(b,a,d,c,e){Ext.Ajax.request({url:"item!setPreviewJsonItem.action",params:{programId:c,proWidth:a,proHeight:d},method:"post",timeout:180000,callback:function(i,o,m){Ext.getBody().unmask();if(m.timedout==true){Ext.Msg.alert(window.top.getIi18NText("systemMessage"),window.top.getIi18NText("timeout")+"<br/><font color='red'>("+window.top.getIi18NText("dealTimeoutTip01")+")</font>");return}var q;try{q=Ext.decode(m.responseText);var h=Number(b[0]);var p=Number(b[1]);var f=a;var g=d;var n=1;if((f>=h)&&(g>=p)){n=0.8}else{if((f>=h)&&(g<=p)){n=g/(p*1.5)}else{if((f<=h)&&(g>=p)){n=f/(h*1.5)}else{var k=f/(h*1.5);var j=g/(p*1.5);n=k<j?k:j}}}top.Ext.create("Ext.window.Window",{id:"activePreviewWindow",title:window.top.getIi18NText("previewProgram")+"："+e,frame:false,width:h*n+14,height:p*n+44,modal:true,cloasable:true,resizable:false,layout:"fit",items:[{id:"activePreviwPanel",html:'<iframe frameborder="0" width="100%" height="100%" src="item!activePreview.action"></iframe>'}]}).show()}catch(l){Ext.Msg.alert(window.top.getIi18NText("systemMessage"),window.top.getIi18NText("loginTimeoutTip01"),function(){window.location.replace("auth!logOffUser.action")});return}if(!q||o==false){Ext.Msg.alert(window.top.getIi18NText("systemMessage"),window.top.getIi18NText("dataError")+"<br/><font color='red'>("+window.top.getIi18NText("dataErrorTip")+")</font>");return}}})}function deviationDivide(c,d,b){b=b/100;var a=0;if(c-d>0){a=(c-d)*b}return a}function changeXY(a,d){if(a&&a.isWindow){var e=Ext.getBody();var b=deviationDivide(e.getHeight(),a.height,d);var c=deviationDivide(e.getWidth(),a.width,d);a.setX(c);a.setY(b)}}function zxLog(b,a){}function checkVersionName(c,b){var a=-1;$.ajax({type:"POST",async:false,url:c,data:{name:b},success:function(d){a=d.code},failure:function(){a=-1}});return a}function isJSON(d){var a=false;if(typeof d=="string"){try{var c=JSON.parse(d);if(typeof c=="object"&&c){a=true}}catch(b){console.log("error："+d+"!!!"+b)}}return a};